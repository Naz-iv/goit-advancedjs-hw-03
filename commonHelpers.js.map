{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet raiseEmptySearchCriteria = () => {\n    iziToast.show({\n        message: `Fill search field`,\n        position: \"topRight\",\n        backgroundColor: 'rgb(250,128,114)',\n        messageColor: 'rgb(255,255,255)'\n    });\n}\n\nlet raiseEmptyResponse = () => {\n    iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: \"topRight\",\n        backgroundColor: 'rgb(250,128,114)',\n        messageColor: 'rgb(255,255,255)'\n    });\n}\n\nexport function loadData(searchText, callbackOnSuccess, callbackOnError, callOnFinally) {\n    if (searchText === null || searchText === \"\") {\n        raiseEmptySearchCriteria();\n        callOnFinally();\n        return;\n    }\n\n    const options = {\n        method: \"GET\",\n        headers: {\n            \"Accept\": \"application/json\",\n        },\n    };\n\n    fetch('https://pixabay.com/api/?' + new URLSearchParams({\n        key: '45339856-2e70ead6ce9cf82bdbbd89c7e',\n        q: searchText,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true\n    }).toString(), options)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n        .then(response => {\n            if (response.hits.length > 0) {\n                callbackOnSuccess(response);\n            } else {\n                raiseEmptyResponse();\n            }\n        })\n        .catch(error => callbackOnError(error))\n        .finally(() => callOnFinally());\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\n\nlet box = new SimpleLightbox('ul.results a', { captionsData: 'alt', captionDelay: 250 });\n\nfunction getElement(element) {\n  return `<li class=\"result-item\">\n        <a class=\"result-link\"\n          href=\"${element.largeImageURL}\">\n          <img class=\"result-image\"\n            src=\"${element.webformatURL}\"\n            alt=\"${element.tags}\" />\n          <ul class=\"statistic\">\n            <li class=\"statistic-item\">\n              <span class=\"likes-title\">Likes</span>\n              <span class=\"likes-number\">${element.likes}</span>\n            </li>\n            <li class=\"statistic-item\">\n              <span class=\"likes-title\">Views</span>\n              <span class=\"likes-number\">${element.views}</span>\n            </li>\n            <li class=\"statistic-item\">\n              <span class=\"likes-title\">Comments</span>\n              <span class=\"likes-number\">${element.comments}</span>\n            </li>\n            <li class=\"statistic-item\">\n              <span class=\"likes-title\">Downloads</span>\n              <span class=\"likes-number\">${element.downloads}</span>\n            </li>\n          </ul>\n        </a>\n      </li>`\n}\n\nexport function render(arrayOfElements) {\n  const update = arrayOfElements.map(el => getElement(el)).join(\"\");\n  \n  const gallery = document.querySelector(\"ul.results\");\n  gallery.insertAdjacentHTML(\"afterbegin\", update);\n\n  box.refresh();\n}","import { loadData } from './js/pixabay-api'\nimport { render } from './js/render-function';\n\nconst mainForm = document.querySelectorAll(\".search\")[0];\nlet loader = document.querySelector(\"div.loader-panel\");\nloader.style.display = \"none\";\n\nmainForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    const searchQuery = mainForm.elements['search-query'].value;\n    loader.style.display = \"block\";\n    const oldElements = document.querySelectorAll(\"li.result-item\");\n    \n    if (oldElements && oldElements.length > 0) {\n        oldElements.forEach(element => element.remove());\n    }\n\n    loadData(searchQuery,\n        response => render(response.hits),\n        error => console.error(error),\n        () => loader.style.display = \"none\");\n});"],"names":["raiseEmptySearchCriteria","iziToast","raiseEmptyResponse","loadData","searchText","callbackOnSuccess","callbackOnError","callOnFinally","options","response","error","box","SimpleLightbox","getElement","element","render","arrayOfElements","update","el","mainForm","loader","event","searchQuery","oldElements"],"mappings":"6vBAIA,IAAIA,EAA2B,IAAM,CACjCC,EAAS,KAAK,CACV,QAAS,oBACT,SAAU,WACV,gBAAiB,mBACjB,aAAc,kBACtB,CAAK,CACL,EAEIC,EAAqB,IAAM,CAC3BD,EAAS,KAAK,CACV,QAAS,2EACT,SAAU,WACV,gBAAiB,mBACjB,aAAc,kBACtB,CAAK,CACL,EAEO,SAASE,EAASC,EAAYC,EAAmBC,EAAiBC,EAAe,CACpF,GAAIH,IAAe,MAAQA,IAAe,GAAI,CAC1CJ,IACAO,IACA,MACH,CAED,MAAMC,EAAU,CACZ,OAAQ,MACR,QAAS,CACL,OAAU,kBACb,CACT,EAEI,MAAM,4BAA8B,IAAI,gBAAgB,CACpD,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAAE,SAAU,EAAEI,CAAO,EACjB,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAKA,GAAY,CACVA,EAAS,KAAK,OAAS,EACvBJ,EAAkBI,CAAQ,EAE1BP,GAEhB,CAAS,EACA,MAAMQ,GAASJ,EAAgBI,CAAK,CAAC,EACrC,QAAQ,IAAMH,EAAa,CAAE,CACtC,CCvDA,IAAII,EAAM,IAAIC,EAAe,eAAgB,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAEvF,SAASC,EAAWC,EAAS,CAC3B,MAAO;AAAA;AAAA,kBAESA,EAAQ,aAAa;AAAA;AAAA,mBAEpBA,EAAQ,YAAY;AAAA,mBACpBA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,2CAIYA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,YAK5D,CAEO,SAASC,EAAOC,EAAiB,CACtC,MAAMC,EAASD,EAAgB,IAAIE,GAAML,EAAWK,CAAE,CAAC,EAAE,KAAK,EAAE,EAEhD,SAAS,cAAc,YAAY,EAC3C,mBAAmB,aAAcD,CAAM,EAE/CN,EAAI,QAAO,CACb,CCtCA,MAAMQ,EAAW,SAAS,iBAAiB,SAAS,EAAE,CAAC,EACvD,IAAIC,EAAS,SAAS,cAAc,kBAAkB,EACtDA,EAAO,MAAM,QAAU,OAEvBD,EAAS,iBAAiB,SAAWE,GAAU,CAC3CA,EAAM,eAAc,EACpB,MAAMC,EAAcH,EAAS,SAAS,cAAc,EAAE,MACtDC,EAAO,MAAM,QAAU,QACvB,MAAMG,EAAc,SAAS,iBAAiB,gBAAgB,EAE1DA,GAAeA,EAAY,OAAS,GACpCA,EAAY,QAAQT,GAAWA,EAAQ,OAAQ,CAAA,EAGnDX,EAASmB,EACLb,GAAYM,EAAON,EAAS,IAAI,EAChCC,GAAS,QAAQ,MAAMA,CAAK,EAC5B,IAAMU,EAAO,MAAM,QAAU,MAAM,CAC3C,CAAC"}